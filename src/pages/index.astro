---
import IndexHero from '../components/IndexHero.astro'
import Layout from '../layouts/Layout.astro'

// const careerLength = (() => {
// 	const origin = new Date('2013/11/01')
//     const now = new Date()
//     const years = new Date(now.getTime() - origin.getTime()).getFullYear() - 1970
// 	return years
// })()
---

<Layout title="Home">
	<IndexHero />
</Layout>

<script>
	class ProjectSummary extends HTMLElement {
		constructor() {
			super()
			let count = 3

			const moreButton = this.querySelector('button')
			const allProjects = this.querySelectorAll('.project-wrapper')

			function showProjects() {
				if (allProjects && allProjects.length > 0) {
					for (let i = 0; i < count; i++) {
						if (i >= allProjects.length && moreButton) {
							moreButton.classList.add('hidden')
							return
						}
						allProjects[i].classList.remove('hidden')
					}
				}
			}

			if (moreButton) {
				moreButton.addEventListener('click', () => {
					count += 3
					showProjects()
				})
			}

			showProjects()
		}
	}
	customElements.define('project-summary', ProjectSummary)
</script>
